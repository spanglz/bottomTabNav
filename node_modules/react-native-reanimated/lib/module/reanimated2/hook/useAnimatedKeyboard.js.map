{"version":3,"names":["useEffect","useRef","NativeReanimated","makeMutable","KeyboardState","useAnimatedKeyboard","ref","listenerId","isSubscribed","current","keyboardEventData","state","UNKNOWN","height","subscribeForKeyboardEvents","unsubscribeFromKeyboardEvents"],"sources":["useAnimatedKeyboard.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport NativeReanimated from '../NativeReanimated';\nimport { makeMutable } from '../core';\nimport { AnimatedKeyboardInfo, KeyboardState } from '../commonTypes';\n\nexport function useAnimatedKeyboard(): AnimatedKeyboardInfo {\n  const ref = useRef<AnimatedKeyboardInfo | null>(null);\n  const listenerId = useRef<number>(-1);\n  const isSubscribed = useRef<boolean>(false);\n\n  if (ref.current === null) {\n    const keyboardEventData: AnimatedKeyboardInfo = {\n      state: makeMutable(KeyboardState.UNKNOWN),\n      height: makeMutable(0),\n    };\n    listenerId.current =\n      NativeReanimated.subscribeForKeyboardEvents(keyboardEventData);\n    ref.current = keyboardEventData;\n    isSubscribed.current = true;\n  }\n  useEffect(() => {\n    if (isSubscribed.current === false && ref.current !== null) {\n      // subscribe again after Fast Refresh\n      listenerId.current = NativeReanimated.subscribeForKeyboardEvents(\n        ref.current\n      );\n      isSubscribed.current = true;\n    }\n    return () => {\n      NativeReanimated.unsubscribeFromKeyboardEvents(listenerId.current);\n      isSubscribed.current = false;\n    };\n  }, []);\n  return ref.current;\n}\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AACA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,SAASC,WAAT,QAA4B,SAA5B;AACA,SAA+BC,aAA/B,QAAoD,gBAApD;AAEA,OAAO,SAASC,mBAAT,GAAqD;EAC1D,MAAMC,GAAG,GAAGL,MAAM,CAA8B,IAA9B,CAAlB;EACA,MAAMM,UAAU,GAAGN,MAAM,CAAS,CAAC,CAAV,CAAzB;EACA,MAAMO,YAAY,GAAGP,MAAM,CAAU,KAAV,CAA3B;;EAEA,IAAIK,GAAG,CAACG,OAAJ,KAAgB,IAApB,EAA0B;IACxB,MAAMC,iBAAuC,GAAG;MAC9CC,KAAK,EAAER,WAAW,CAACC,aAAa,CAACQ,OAAf,CAD4B;MAE9CC,MAAM,EAAEV,WAAW,CAAC,CAAD;IAF2B,CAAhD;IAIAI,UAAU,CAACE,OAAX,GACEP,gBAAgB,CAACY,0BAAjB,CAA4CJ,iBAA5C,CADF;IAEAJ,GAAG,CAACG,OAAJ,GAAcC,iBAAd;IACAF,YAAY,CAACC,OAAb,GAAuB,IAAvB;EACD;;EACDT,SAAS,CAAC,MAAM;IACd,IAAIQ,YAAY,CAACC,OAAb,KAAyB,KAAzB,IAAkCH,GAAG,CAACG,OAAJ,KAAgB,IAAtD,EAA4D;MAC1D;MACAF,UAAU,CAACE,OAAX,GAAqBP,gBAAgB,CAACY,0BAAjB,CACnBR,GAAG,CAACG,OADe,CAArB;MAGAD,YAAY,CAACC,OAAb,GAAuB,IAAvB;IACD;;IACD,OAAO,MAAM;MACXP,gBAAgB,CAACa,6BAAjB,CAA+CR,UAAU,CAACE,OAA1D;MACAD,YAAY,CAACC,OAAb,GAAuB,KAAvB;IACD,CAHD;EAID,CAZQ,EAYN,EAZM,CAAT;EAaA,OAAOH,GAAG,CAACG,OAAX;AACD"}