{"version":3,"names":["useRef","useSharedValue","getTag","getShadowNodeWrapperFromHostInstance","useAnimatedRef","tag","ref","isFabric","global","_IS_FABRIC","current","fun","component","value","Object","defineProperty","writable","enumerable"],"sources":["useAnimatedRef.ts"],"sourcesContent":["import { Component, useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport { RefObjectFunction } from './commonTypes';\nimport { ShadowNodeWrapper } from '../commonTypes';\nimport { getTag } from '../NativeMethods';\nimport { getShadowNodeWrapperFromHostInstance } from '../fabricUtils';\n\nexport function useAnimatedRef<T extends Component>(): RefObjectFunction<T> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const ref = useRef<RefObjectFunction<T>>();\n  const isFabric = global._IS_FABRIC;\n\n  if (!ref.current) {\n    const fun: RefObjectFunction<T> = <RefObjectFunction<T>>((component) => {\n      'worklet';\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = isFabric\n          ? getShadowNodeWrapperFromHostInstance(component)\n          : getTag(component);\n        fun.current = component;\n      }\n      return tag.value;\n    });\n\n    Object.defineProperty(fun, 'current', {\n      value: null,\n      writable: true,\n      enumerable: false,\n    });\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"AAAA,SAAoBA,MAApB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAGA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,oCAAT,QAAqD,gBAArD;AAEA,OAAO,SAASC,cAAT,GAAqE;EAC1E,MAAMC,GAAG,GAAGJ,cAAc,CAAoC,CAAC,CAArC,CAA1B;EACA,MAAMK,GAAG,GAAGN,MAAM,EAAlB;EACA,MAAMO,QAAQ,GAAGC,MAAM,CAACC,UAAxB;;EAEA,IAAI,CAACH,GAAG,CAACI,OAAT,EAAkB;IAChB,MAAMC,GAAyB,GAA2BC,SAAD,IAAe;MACtE,UADsE,CAEtE;;MACA,IAAIA,SAAJ,EAAe;QACbP,GAAG,CAACQ,KAAJ,GAAYN,QAAQ,GAChBJ,oCAAoC,CAACS,SAAD,CADpB,GAEhBV,MAAM,CAACU,SAAD,CAFV;QAGAD,GAAG,CAACD,OAAJ,GAAcE,SAAd;MACD;;MACD,OAAOP,GAAG,CAACQ,KAAX;IACD,CAVD;;IAYAC,MAAM,CAACC,cAAP,CAAsBJ,GAAtB,EAA2B,SAA3B,EAAsC;MACpCE,KAAK,EAAE,IAD6B;MAEpCG,QAAQ,EAAE,IAF0B;MAGpCC,UAAU,EAAE;IAHwB,CAAtC;IAKAX,GAAG,CAACI,OAAJ,GAAcC,GAAd;EACD;;EAED,OAAOL,GAAG,CAACI,OAAX;AACD"}